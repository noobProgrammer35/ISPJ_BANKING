{% extends 'admin/master.html' %}
{% block body %}

<div class="single-blog-wrapper">

        <div class="container">
            <div class="row justify-content-center">
                <div class="col-12 col-md-8">
                    <div class="regular-page-content-wrapper section-padding-80">
                        <h2>Search Vulnerability</h2>
                        <p>Enter any package/library name to search for any related vulnerability you are looking for</p>
                        <form method="post" action="/vuln_search">
                            <div class = 'form-group'>
                            <input name ='query' class="form-control"><br>
                            <input type="submit" name="submit" value="Search" class="btn btn-primary">
                            </div>
                        </form>
                        <br>
                        <h1>Outdated Packages Installed</h1>
                        <p>NOTE: Manually updating at your server is recommended if upgrading here is not working.</p>
                        <form action ='/scan' method="POST">
                                <input type ='submit' value ='Scan For Vulnerability' class="btn btn-primary">
                            </form>
                        <br>
                        <form action="/upgrade_checked" method="post">
                            <input type="submit" value ='Upgrade' class="btn btn-primary">
                            <br><br>

                        <table class="table table-striped" id ='sort'>
                            <tr>
                                <th>Checkbox</th>
                                <th>Package Name</th>
                                <th>Package Current Version</th>
                                <th>Package Latest Version</th>
                                <th>Status</th>
                            </tr>
                              {% for key,value in package_dict.items() %}
                            <tr>

                                   {% if key != 'Flask-Admin' %}
                                   <td>
                                       <input  type="checkbox" name ='package_checked' value ='{{ key }}'>
                                   </td>
                                   <td>{{ key }}</td>
                                   <td>{{ package_dict[key]['Current_Version'] }}</td>
                                   <td>{{ package_dict[key]['Latest_Version'] }}</td>

                                   <td style="color:red">
                                     Outdated!
                                   </td>
                                    {% endif %}
                            </tr>
                                                            {% endfor %}

                        </table>
                        </form>
                        <br>
                        <h2>Updated Library installed</h2>


                            <br>
                        <table class="table table-striped" id ='sort'>
                            <tr>
                                <th>Package Name</th>
                                <th>Version</th>

                            </tr>
                            {% for key,value in package_version_dict.items() %}
                                <tr>
                                    {% if key != 'Flask-Admin' %}
                                        <td>{{ key }}</td>
                                        <td>{{ package_version_dict[key]['Current_Version'] }}</td>

                                    {% endif %}
                                </tr>
                            {% endfor %}
                            <br>



                        </table>
                            <br>


                        <br><br>
                    </div>
                </div>
            </div>
        </div>
</div>





<script>


</script>

{% endblock body %}